(function(){"use strict";try{if(typeof document<"u"){var o=document.createElement("style");o.appendChild(document.createTextNode("._outter_mjs0y_4{position:fixed;top:0;left:0;z-index:1000;width:0;height:0;all:initial;font-family:system-ui,sans-serif;font-size:1rem;@media (prefers-color-scheme: dark){*{--color-base-0: rgb(0, 0, 0);--color-base-100: #171717;--color-base-200: #343434;--color-base-content: #c2c2c2;--color-primary: rgb(127, 67, 255);--color-primary-content: rgb(227, 218, 237)}}@media (prefers-color-scheme: light){*{--color-base-0: rgb(255, 255, 255);--color-base-100: #e9e9e9;--color-base-200: #c9c9c9;--color-base-content: #171717;--color-primary: rgb(103, 36, 248);--color-primary-content: rgb(227, 218, 237)}}}._backdrop_mjs0y_47{background:rgb(from var(--color-base-0) r g b / 60%);width:100vw;height:100vh;position:fixed;top:0;left:0;backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);z-index:1000}._container_mjs0y_59{position:fixed;top:0;left:0;width:100vw;height:100vh;display:flex;flex-direction:column;justify-content:center;align-items:center;color:var(--color-base-content);z-index:1001;button{--color-border: var(--color-base-200);--color-bg: rgb(from var(--color-base-200) r g b / 60%);--color-text: var(--color-base-content);border:none;cursor:pointer;background:transparent;padding:.5em 1em;box-sizing:border-box;color:var(--color-text);transition:all;transition-duration:.15s}button:hover{--color-border: var(--color-base-200);--color-bg: rgb(from var(--color-base-0) r g b / 100%);--color-text: var(--color-base-content)}button:disabled{opacity:50%}button._btn_mjs0y_92{background-color:var(--color-bg);color:var(--color-text);border:solid 1px var(--color-border);padding:.5em 1em;border-radius:.4em;display:inline-flex;justify-content:center;align-items:center}a{color:var(--color-primary)}a:hover{color:var(--color-base-content);text-decoration:underline}}._outter_mjs0y_4,._container_mjs0y_59,._content_mjs0y_114,._backdrop_mjs0y_47{transition:all;transition-duration:.15s}._content_mjs0y_114{max-width:320px;width:320px;background-color:rgb(from var(--color-base-100) r g b / 60%);backdrop-filter:blur(20px);-webkit-backdrop-filter:blur(20px);display:block;box-sizing:border-box;border-radius:1em;box-shadow:0 14px 47px -13px #0000000d;-webkit-box-shadow:0px 14px 47px -13px rgba(0,0,0,.05);-moz-box-shadow:0px 14px 47px -13px rgba(0,0,0,.05);border:solid 1px rgb(from var(--color-base-200) r g b / 60%);._head_mjs0y_133{display:flex;width:100%;justify-content:space-between;align-items:center;padding:1em;box-sizing:border-box}._main_mjs0y_141{padding:1em 1.5em}._foot_mjs0y_144{padding:.5em 1em 1.5em;text-align:center;color:rgb(from var(--color-base-content) r g b / 60%)}h3{font-size:1.1rem;line-height:1.2rem;padding:0;margin:0}}._content_mjs0y_114:hover{border:solid 1px rgb(from var(--color-base-200) r g b / 100%)}")),document.head.appendChild(o)}}catch(r){console.error("vite-plugin-css-injected-by-js",r)}})();
"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const l=require("solid-js"),Z=require("@arweave-wallet-kit/core/strategy");var de=Object.defineProperty,fe=(r,t,n)=>t in r?de(r,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):r[t]=n,B=(r,t,n)=>(fe(r,typeof t!="symbol"?t+"":t,n),n);async function A(r,t=[]){return window!=null&&window.arweaveWallet?await window.arweaveWallet[r](...t):new Promise((n,s)=>window.addEventListener("arweaveWalletLoaded",async()=>{try{n(await window.arweaveWallet[r](...t))}catch(d){s(d)}}))}class ye{constructor(){B(this,"id","browserwallet"),B(this,"name","Browser Wallet"),B(this,"description","Any browser wallet with an injected API"),B(this,"theme","121,212,131"),B(this,"logo","KKiSlNKc5K59MXzUPz5qjtCLsl6_ckjAOg9MyAzaUs0")}async isAvailable(){return typeof window>"u"||!window?(console.error(`[Arweave Wallet Kit] "${this.id}" strategy is unavailable. Window is undefined`),!1):window.arweaveWallet?!0:new Promise(t=>{const n=()=>t(!0);window.addEventListener("arweaveWalletLoaded",n),setTimeout(()=>{window.removeEventListener("arweaveWalletLoaded",n),window.arweaveWallet||console.error(`[Arweave Wallet Kit] "${this.id}" strategy is unavailable. window.arweaveWallet is undefined`),t(!!window.arweaveWallet)},7e3)})}async sync(){}async connect(t,n,s){return await A("connect",[t,n,s])}async disconnect(){return await A("disconnect")}async getActiveAddress(){return await A("getActiveAddress")}async getAllAddresses(){return await A("getAllAddresses")}async getPermissions(){return await A("getPermissions")}async getWalletNames(){return await A("getWalletNames")}async sign(t,n){const s=await A("sign",[t,n]);return t.setSignature({id:s.id,owner:s.owner,reward:s.reward,tags:s.tags,signature:s.signature}),t}async signDataItem(t){return await A("signDataItem",[t])}async encrypt(t,n){return await A("encrypt",[t,n])}async decrypt(t,n){return await A("decrypt",[t,n])}async getArweaveConfig(){return await A("getArweaveConfig")}async signature(t,n){return await A("signature",[t,n])}async getActivePublicKey(){return await A("getActivePublicKey")}async dispatch(t){return await A("dispatch",[t])}async addToken(t){throw new Error("Not implemented: "+t)}addAddressEvent(t){const n=s=>t(s.detail.address);return addEventListener("walletSwitch",n),n}removeAddressEvent(t){removeEventListener("walletSwitch",t)}}function ge(r,t,n){let s=n.length,d=t.length,f=s,c=0,o=0,i=t[d-1].nextSibling,y=null;for(;c<d||o<f;){if(t[c]===n[o]){c++,o++;continue}for(;t[d-1]===n[f-1];)d--,f--;if(d===c){const g=f<s?o?n[o-1].nextSibling:n[f-o]:i;for(;o<f;)r.insertBefore(n[o++],g)}else if(f===o)for(;c<d;)(!y||!y.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[f-1]&&n[o]===t[d-1]){const g=t[--d].nextSibling;r.insertBefore(n[o++],t[c++].nextSibling),r.insertBefore(n[--f],g),t[d]=n[f]}else{if(!y){y=new Map;let m=o;for(;m<f;)y.set(n[m],m++)}const g=y.get(t[c]);if(g!=null)if(o<g&&g<f){let m=c,P=1,_;for(;++m<d&&m<f&&!((_=y.get(t[m]))==null||_!==g+P);)P++;if(P>g-o){const K=t[c];for(;o<g;)r.insertBefore(n[o++],K)}else r.replaceChild(n[o++],t[c++])}else c++;else t[c++].remove()}}}const ee="_$DX_DELEGATE";function x(r,t,n,s){let d;const f=()=>{const o=document.createElement("template");return o.innerHTML=r,o.content.firstChild},c=()=>(d||(d=f())).cloneNode(!0);return c.cloneNode=c,c}function ue(r,t=window.document){const n=t[ee]||(t[ee]=new Set);for(let s=0,d=r.length;s<d;s++){const f=r[s];n.has(f)||(n.add(f),t.addEventListener(f,he))}}function te(r,t,n){F(r)||(n==null?r.removeAttribute(t):r.setAttribute(t,n))}function N(r,t){F(r)||(t==null?r.removeAttribute("class"):r.className=t)}function S(r,t,n,s){if(n!==void 0&&!s&&(s=[]),typeof t!="function")return G(r,t,s,n);l.createRenderEffect(d=>G(r,t(),d,n),s)}function F(r){return!!l.sharedConfig.context&&!l.sharedConfig.done&&(!r||r.isConnected)}function he(r){if(l.sharedConfig.registry&&l.sharedConfig.events&&l.sharedConfig.events.find(([i,y])=>y===r))return;let t=r.target;const n=`$$${r.type}`,s=r.target,d=r.currentTarget,f=i=>Object.defineProperty(r,"target",{configurable:!0,value:i}),c=()=>{const i=t[n];if(i&&!t.disabled){const y=t[`${n}Data`];if(y!==void 0?i.call(t,y,r):i.call(t,r),r.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(r.target)&&f(t.host),!0},o=()=>{for(;c()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(r,"currentTarget",{configurable:!0,get(){return t||document}}),l.sharedConfig.registry&&!l.sharedConfig.done&&(l.sharedConfig.done=_$HY.done=!0),r.composedPath){const i=r.composedPath();f(i[0]);for(let y=0;y<i.length-2&&(t=i[y],!!c());y++){if(t._$host){t=t._$host,o();break}if(t.parentNode===d)break}}else o();f(s)}function G(r,t,n,s,d){const f=F(r);if(f){!n&&(n=[...r.childNodes]);let i=[];for(let y=0;y<n.length;y++){const g=n[y];g.nodeType===8&&g.data.slice(0,2)==="!$"?g.remove():i.push(g)}n=i}for(;typeof n=="function";)n=n();if(t===n)return n;const c=typeof t,o=s!==void 0;if(r=o&&n[0]&&n[0].parentNode||r,c==="string"||c==="number"){if(f||c==="number"&&(t=t.toString(),t===n))return n;if(o){let i=n[0];i&&i.nodeType===3?i.data!==t&&(i.data=t):i=document.createTextNode(t),n=I(r,n,s,i)}else n!==""&&typeof n=="string"?n=r.firstChild.data=t:n=r.textContent=t}else if(t==null||c==="boolean"){if(f)return n;n=I(r,n,s)}else{if(c==="function")return l.createRenderEffect(()=>{let i=t();for(;typeof i=="function";)i=i();n=G(r,i,n,s)}),()=>n;if(Array.isArray(t)){const i=[],y=n&&Array.isArray(n);if(z(i,t,n,d))return l.createRenderEffect(()=>n=G(r,i,n,s,!0)),()=>n;if(f){if(!i.length)return n;if(s===void 0)return n=[...r.childNodes];let g=i[0];if(g.parentNode!==r)return n;const m=[g];for(;(g=g.nextSibling)!==s;)m.push(g);return n=m}if(i.length===0){if(n=I(r,n,s),o)return n}else y?n.length===0?ne(r,i,s):ge(r,n,i):(n&&I(r),ne(r,i));n=i}else if(t.nodeType){if(f&&t.parentNode)return n=o?[t]:t;if(Array.isArray(n)){if(o)return n=I(r,n,s,t);I(r,n,null,t)}else n==null||n===""||!r.firstChild?r.appendChild(t):r.replaceChild(t,r.firstChild);n=t}}return n}function z(r,t,n,s){let d=!1;for(let f=0,c=t.length;f<c;f++){let o=t[f],i=n&&n[r.length],y;if(!(o==null||o===!0||o===!1))if((y=typeof o)=="object"&&o.nodeType)r.push(o);else if(Array.isArray(o))d=z(r,o,i)||d;else if(y==="function")if(s){for(;typeof o=="function";)o=o();d=z(r,Array.isArray(o)?o:[o],Array.isArray(i)?i:[i])||d}else r.push(o),d=!0;else{const g=String(o);i&&i.nodeType===3&&i.data===g?r.push(i):r.push(document.createTextNode(g))}}return d}function ne(r,t,n=null){for(let s=0,d=t.length;s<d;s++)r.insertBefore(t[s],n)}function I(r,t,n,s){if(n===void 0)return r.textContent="";const d=s||document.createTextNode("");if(t.length){let f=!1;for(let c=t.length-1;c>=0;c--){const o=t[c];if(d!==o){const i=o.parentNode===r;!f&&!c?i?r.replaceChild(d,o):r.insertBefore(d,n):i&&o.remove()}else f=!0}}else r.insertBefore(d,n);return[d]}const we="http://www.w3.org/2000/svg";function ve(r,t=!1){return t?document.createElementNS(we,r):document.createElement(r)}function me(r){const{useShadow:t}=r,n=document.createTextNode(""),s=()=>r.mount||document.body,d=l.getOwner();let f,c=!!l.sharedConfig.context;return l.createEffect(()=>{c&&(l.getOwner().user=c=!1),f||(f=l.runWithOwner(d,()=>l.createMemo(()=>r.children)));const o=s();if(o instanceof HTMLHeadElement){const[i,y]=l.createSignal(!1),g=()=>y(!0);l.createRoot(m=>S(o,()=>i()?m():f(),null)),l.onCleanup(g)}else{const i=ve(r.isSVG?"g":"div",r.isSVG),y=t&&i.attachShadow?i.attachShadow({mode:"open"}):i;Object.defineProperty(i,"_$host",{get(){return n.parentNode},configurable:!0}),S(y,f),o.appendChild(i),r.ref&&r.ref(i),l.onCleanup(()=>o.removeChild(i))}},void 0,{render:!c}),n}const pe="_outter_mjs0y_4",be="_backdrop_mjs0y_47",Ce="_container_mjs0y_59",Ae="_btn_mjs0y_92",Pe="_content_mjs0y_114",Se="_head_mjs0y_133",_e="_main_mjs0y_141",$e="_foot_mjs0y_144",$={outter:pe,backdrop:be,container:Ce,btn:Ae,content:Pe,head:Se,main:_e,foot:$e},xe="wallet_kit_strategy_id";function Ee(){localStorage&&localStorage.removeItem(xe)}var Ne=x('<svg xmlns=http://www.w3.org/2000/svg width=1em height=1em viewBox="0 0 24 24"><path fill=currentColor d=M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z opacity=0.25></path><path fill=currentColor d=M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z><animateTransform attributeName=transform dur=1.612s repeatCount=indefinite type=rotate values="0 12 12;360 12 12">'),Te=x('<button><svg xmlns=http://www.w3.org/2000/svg width=1.2em height=1.2em viewBox="0 0 24 24"><path d="m7.05 5.636l4.95 4.95l4.95-4.95l1.414 1.414l-4.95 4.95l4.95 4.95l-1.415 1.414l-4.95-4.95l-4.949 4.95l-1.414-1.414l4.95-4.95l-4.95-4.95z">'),We=x("<div>"),ke=x("<button role=link>Install "),Le=x("<div><div><img><div></div><div></div>"),je=x("<div id=solid-arwallet-connector><div><div><div><h3></h3></div><div>Don't have a wallet? <a href=https://arwiki.wiki/#/en/wallets target=_blank>Get a new</a></div></div></div><div>"),Me=x("<span><span>Connecting..."),Ie=x("<button>Back"),Re=x("<div>no strategies"),Be=x("<button><span></span><img>");const re=l.createContext(),Ke=()=>Ne();function Oe(r){let t=null;const n=()=>r?.config?.permissions||["ACCESS_ADDRESS","SIGN_TRANSACTION"],s=()=>r?.config?.strategies||null,d=()=>r?.config?.gatewayConfig||{host:"arweave.net",port:443,protocol:"https"},f=()=>r?.config?.appInfo||{name:window.location.hostname,logo:null},[c,o]=l.createSignal(!1),[i,y]=l.createSignal(),[g,m]=l.createSignal(!1),[P,_]=l.createSignal(!1),[K,O]=l.createSignal(),[R,H]=l.createSignal(),[V,X]=l.createSignal(!0),L=()=>Z.getStrategy(K(),s()),Y=l.createMemo(()=>`${d()?.protocol}://${d()?.host}`);l.onMount(()=>{m(!1),_(!1),Z.syncStrategies(s(),n(),r?.config?.ensurePermissions).then(h=>{h&&h.getActiveAddress().then(b=>{b&&(O(h.id),y(b),o(!0))}).catch(b=>{throw b})}).catch(h=>{console.log("[Arweave Wallet Kit] is not connected")}).finally(()=>_(!1))}),l.onCleanup(()=>{m(!1),_(!1),t!=null&&L()?.removeAddressEvent(t)});function oe(h){console.log("address changed : ",h),y(h),o(!!h)}l.createEffect(()=>{c()&&(t=L()?.addAddressEvent(oe)),g()?document.body.style.overflow="hidden":document.body.style.overflow="auto"});async function ie(){if(!L()||!c()||P())throw new Error("[Arweave Wallet Kit] Not yet connected");try{return await L()?.disconnect(),Ee(K()||L()?.id),O(null),o(!1),y(null),t&&L()?.removeAddressEvent(t),Promise.resolve()}catch{throw new Error(`[Arweave Wallet Kit] Could not disconnect
`+(e?.message||e))}}async function le(h){if(h){H({name:h.name,logo:h.logo,url:h.url,theme:h.theme}),_(!0),X(!0);try{if(await h.isAvailable()){await h.connect(n(),f(),d());const C=await h.getActiveAddress();if(C)y(C),o(!0),Z.saveStrategy(h.id),O(h.id),_(!1),H(null),m(!1);else{const j=new Error(`Connecting ${h.name} faild.`);throw j.code="FAILD",j}}else{const C=new Error(`Not installed ${h.name}.`);throw C.code="UNINSTALL",C}}catch(b){b.code=="UNINSTALL"&&X(!1)}_(!1),H(null)}}const se=h=>(()=>{var b=je(),C=b.firstChild,j=C.firstChild,D=j.firstChild,ce=D.firstChild,Q=D.nextSibling,q=C.nextSibling;return S(ce,(()=>{var a=l.createMemo(()=>!!P());return()=>a()?(()=>{var v=Me();return v.style.setProperty("display","inline-flex"),v.style.setProperty("align-items","center"),v.style.setProperty("gap","0.5em"),v})():"Connect to a wallet"})()),S(D,l.createComponent(l.Show,{get when(){return!P()},get fallback(){return l.createMemo(()=>!!V())()?l.createComponent(Ke,{}):(()=>{var a=Ie();return a.$$click=()=>{_(!1)},a})()},get children(){var a=Te(),v=a.firstChild,w=v.firstChild;return a.$$click=()=>m(!1),a.style.setProperty("background","transparent"),a.style.setProperty("padding","0"),a.style.setProperty("display","flex"),a.style.setProperty("justify-content","center"),a.style.setProperty("align-items","center"),w.style.setProperty("fill","currentcolor"),l.createRenderEffect(()=>a.disabled=P()),a}}),null),S(j,l.createComponent(l.Switch,{get children(){return[l.createComponent(l.Match,{get when(){return!P()},get children(){var a=We();return a.style.setProperty("display","flex"),a.style.setProperty("flex-direction","column"),a.style.setProperty("gap","1em"),S(a,l.createComponent(l.For,{get each(){return s()},get fallback(){return Re()},children:v=>(()=>{var w=Be(),T=w.firstChild,p=T.nextSibling;return w.$$click=()=>{le(v)},w.style.setProperty("display","flex"),w.style.setProperty("justify-content","space-between"),w.style.setProperty("align-items","center"),S(T,()=>v.name),p.style.setProperty("width","16px"),p.style.setProperty("height","16px"),p.style.setProperty("padding","6px"),p.style.setProperty("border-radius","6px"),p.style.setProperty("box-sizing","content-box"),l.createRenderEffect(u=>{var W=$.btn,k=P(),E=`${Y()}/${v.logo}`,M=`rgb(${v.theme||"0,0,0"})`;return W!==u.e&&N(w,u.e=W),k!==u.t&&(w.disabled=u.t=k),E!==u.a&&te(p,"src",u.a=E),M!==u.o&&((u.o=M)!=null?p.style.setProperty("background",M):p.style.removeProperty("background")),u},{e:void 0,t:void 0,a:void 0,o:void 0}),w})()})),l.createRenderEffect(()=>N(a,$.main)),a}}),l.createComponent(l.Match,{get when(){return P()},get children(){var a=Le(),v=a.firstChild,w=v.firstChild,T=w.nextSibling,p=T.nextSibling;return a.style.setProperty("display","flex"),a.style.setProperty("flex-direction","column"),a.style.setProperty("gap","1em"),v.style.setProperty("display","flex"),v.style.setProperty("flex-direction","column"),v.style.setProperty("width","100%"),v.style.setProperty("justify-content","center"),v.style.setProperty("align-items","center"),v.style.setProperty("gap","0.5em"),w.style.setProperty("width","48px"),w.style.setProperty("height","48px"),w.style.setProperty("padding","16px"),w.style.setProperty("border-radius","16px"),w.style.setProperty("box-sizing","content-box"),S(T,()=>R()?.name),p.style.setProperty("font-size","0.8em"),p.style.setProperty("opacity","0.6"),p.style.setProperty("text-align","center"),S(p,(()=>{var u=l.createMemo(()=>!!V());return()=>u()?"Confirm connection request in the wallet popup window":`Not installed ${R()?.name} `})()),S(a,l.createComponent(l.Show,{get when(){return!V()},get children(){var u=ke();return u.firstChild,S(u,()=>R()?.name,null),l.createRenderEffect(()=>N(u,$.btn)),u}}),null),l.createRenderEffect(u=>{var W=$.main,k=`${Y()}/${R()?.logo}`,E=`rgb(${R()?.theme||"0,0,0"})`;return W!==u.e&&N(a,u.e=W),k!==u.t&&te(w,"src",u.t=k),E!==u.a&&((u.a=E)!=null?w.style.setProperty("background",E):w.style.removeProperty("background")),u},{e:void 0,t:void 0,a:void 0}),a}})]}}),Q),l.createRenderEffect(a=>{var v=$.outter,w=`${g()?"visible":"hidden"}`,T=$.container,p=`${g()?"0% 0%":"0% 50%"}`,u=`${g()?"100":"0"}`,W=$.content,k=$.head,E=$.foot,M=$.backdrop,U=`${g()?"100":"0"}`;return v!==a.e&&N(b,a.e=v),w!==a.t&&((a.t=w)!=null?b.style.setProperty("visibility",w):b.style.removeProperty("visibility")),T!==a.a&&N(C,a.a=T),p!==a.o&&((a.o=p)!=null?C.style.setProperty("translate",p):C.style.removeProperty("translate")),u!==a.i&&((a.i=u)!=null?C.style.setProperty("opacity",u):C.style.removeProperty("opacity")),W!==a.n&&(j.className=a.n=W),k!==a.s&&N(D,a.s=k),E!==a.h&&N(Q,a.h=E),M!==a.r&&N(q,a.r=M),U!==a.d&&((a.d=U)!=null?q.style.setProperty("opacity",U):q.style.removeProperty("opacity")),a},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0}),b})(),J=()=>{if(c()){console.log("[Arweave Wallet Kit] Already connected");return}P()||(y(null),O(null),m(!0))},ae={connected:c,connecting:P,address:i,showConnector:J,wallet:L,disconnect:ie,walletConnectionCheck:(h,b)=>{h.addEventListener("click",C=>{c()?b()?.():(J(),C.preventDefault())})}};return l.createComponent(re.Provider,{value:ae,get children(){return[l.createMemo(()=>r.children),l.createComponent(me,{get children(){return l.createComponent(se,{})}})]}})}function De(){return l.useContext(re)}ue(["click"]);exports.BrowserWalletStrategy=ye;exports.WalletProvider=Oe;exports.useWallet=De;
